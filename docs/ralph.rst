Using Ralph
===========

Ralph is an autonomous coding assistant that works in a loop to complete development tasks.
This project uses the `ralph-claude-code <https://github.com/frankbria/ralph-claude-code>`_ wrapper.

Overview
--------

Ralph enables autonomous task execution with Claude Code, allowing you to delegate coding work
that Claude can complete independently with built-in safety checks and progress monitoring.

Setup
-----

1. Install ralph-claude-code following the instructions at https://github.com/frankbria/ralph-claude-code

2. The project is already configured - no additional setup needed

3. Start ralph with a task:

.. code-block:: bash

    $ ralph "Fix the failing test in test_subscriptions.py"

Key Ralph Files
---------------

Ralph organizes project configuration in a ``.ralph/`` directory with several key files:

**.ralphrc** (project root, checked into git)
    Main configuration file containing:

    - Project settings (name, type)
    - Safety limits (max calls per hour: 20, timeout: 15 min)
    - Tool permissions (allowed Claude Code tools)
    - Circuit breakers (thresholds for detecting stuck loops)
    - Task sources (GitHub issues, local tasks)

**.ralph/fix_plan.md** (checked into git)
    **Purpose**: The actionable task list that Ralph executes autonomously.

    - Auto-generated with smart defaults during setup
    - **You should edit this file** to add/modify implementation tasks
    - Tasks organized by priority (High/Medium/Low)
    - Tasks marked complete as Ralph works through them
    - Includes architecture notes and loop summaries

    **When to edit**: Add new tasks here or adjust priorities as development progresses.

**.ralph/AGENT.md** (checked into git)
    **Purpose**: Build, test, and run commands for the project.

    - Auto-generated by detecting commands in your project
    - Auto-maintained by Ralph - **rarely needs manual editing**
    - Contains Docker, testing, and quality check commands

    **When to edit**: Rarely needed - Ralph keeps this synchronized automatically.

**.ralph/PROMPT.md** (checked into git)
    High-level instructions for Ralph about development principles, testing guidelines,
    and status reporting format.

Files NOT Checked Into Git
---------------------------

The following Ralph files are excluded via ``.gitignore`` and not tracked:

- ``.ralph/.*`` - Session files (.ralph_session, .ralph_session_history, etc.)
- ``.ralph/status.json`` - Current task execution status
- ``.ralph/progress.json`` - Progress tracking data
- ``.ralph/logs/`` - Execution logs

Common Workflow
---------------

.. code-block:: bash

    # 1. Edit .ralph/fix_plan.md to add your task
    $ vim .ralph/fix_plan.md

    # 2. Start ralph (it reads fix_plan.md automatically)
    $ ralph

    # 3. Ralph executes tasks from fix_plan.md in priority order
    # 4. Review changes and commit when satisfied

Best Practices
--------------

- **Edit fix_plan.md** to manage your task backlog
- Write clear, specific task descriptions with acceptance criteria
- Review Ralph's changes after each loop completes
- Keep tasks focused and well-scoped
- Monitor output for tool permissions or circuit breaker issues
- Commit working changes before starting new tasks

Safety Features
---------------

Ralph includes several safety mechanisms:

- **Tool whitelisting**: Only approved tools can be used (see .ralphrc)
- **Circuit breakers**: Automatic stopping if no progress or repeated errors
- **Timeouts**: Maximum execution time limits (15 minutes)
- **Session tracking**: Full audit trail in logs
- **Progress monitoring**: Tracks files modified, tests status, work type

For more information, see the `ralph-claude-code documentation <https://github.com/frankbria/ralph-claude-code>`_.
